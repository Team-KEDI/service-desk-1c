#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
    
    // Проверяем, что это новый документ
    Если Объект.Ссылка.Пустая() Тогда
        ЗаполнитьПользователяПоНаименованию();
    КонецЕсли;
    
    // Проверяем, есть ли у текущего пользователя роль администратора
    ЭтоАдминистратор = РольДоступна("Администратор");
    
    // Управляем доступностью поля "Исполнитель"
    // "Исполнитель" — это имя элемента на форме (проверьте его в свойствах)
    Элементы.Исполнитель.ТолькоПросмотр = НЕ ЭтоАдминистратор;
    
    // Заполняем системную информацию, если это новый документ
    Если Объект.Ссылка.Пустая() Тогда
        
        // 1. Версия платформы
        СистемнаяИнфо = Новый СистемнаяИнформация;
        Объект.ВерсияПлатформы = СистемнаяИнфо.ВерсияПриложения; // Например, 8.3.27.1508
        
        // 2. Имя конфигурации
        Объект.Конфигурация = Метаданные.Имя; // ConfigurationServiceDesk
        
        // 3. Строка соединения (Имя базы)
        Объект.ИмяБазы = СтрокаСоединенияИнформационнойБазы();
        
    КонецЕсли;
    
    // 2. Управление доступом
    // Проверяем наличие прав администратора или исполнителя
    ДоступРазрешен = РольДоступна("Администратор") ИЛИ РольДоступна("Исполнитель");
    
    // Управляем группой, в которую вы объединили эти три поля
    // Если группы нет, можно управлять каждым полем отдельно: Элементы.Конфигурация.Видимость = ...
    
    Элементы.ГруппаТехническиеДанные.Видимость = ДоступРазрешен;
    Элементы.ГруппаТехническиеДанные.ТолькоПросмотр = Истина; // Запрет редактирования для всех

КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ЗаполнитьПользователяПоНаименованию()
	
	// Получаем полное имя текущего сеанса (например, "Иванов Иван Петрович")
	ИмяТекущегоПользователя = ПользователиИнформационнойБазы.ТекущийПользователь().ПолноеИмя;
	
	// Если полное имя не задано, попробуем краткое имя (логин)
	Если ПустаяСтрока(ИмяТекущегоПользователя) Тогда
		ИмяТекущегоПользователя = ИмяПользователя();
	КонецЕсли;
	
	// Ищем в справочнике ПользователиИТ по Наименованию
	НайденныйПользователь = Справочники.ПользователиИТ.НайтиПоНаименованию(ИмяТекущегоПользователя);
	
	// Проверяем, что объект найден и он активен
	Если Не НайденныйПользователь.Пустая() Тогда
		
		// Если нужно проверять флаг "Активен" (как в вашем реквизите)
		Если НайденныйПользователь.Активен Тогда
			Объект.Пользователь = НайденныйПользователь;
		КонецЕсли;
		
	КонецЕсли;

КонецПроцедуры

#КонецОбласти